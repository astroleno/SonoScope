# SonoScope 独立客户端

## 概述

这是一个基于 FlipLink 动画效果的音频可视化独立客户端，提供酷炫的用户界面和完整的音频处理功能。

## 功能特性

### 🎨 视觉设计
- **FlipLink 动画效果**：基于 `ref_p5/Text/main.tsx` 的酷炫翻转动画
- **响应式设计**：完美适配桌面端和移动端
- **主题系统**：支持深色主题和霓虹色彩
- **无障碍访问**：完整的键盘导航和 ARIA 支持

### 🎵 音频处理
- **实时特征提取**：RMS、频谱质心、MFCC、色度等 32+ 特征
- **音高检测**：基于启发式算法的音高识别
- **节拍检测**：BPM 检测和节拍跟踪
- **乐器识别**：基于 YAMNet 的乐器分类

### 🎯 预设系统
- **脉冲 (Pulse)**：动态脉冲效果
- **Accretion**：粒子聚集效果
- **Spiral**：螺旋旋转效果
- **Mosaic**：马赛克拼贴效果
- **Wave**：波浪流动效果

### 🎮 交互控制
- **一键启动/停止**：简单的音频处理控制
- **敏感度调节**：0.5x - 3.0x 反应强度控制
- **原始数据开关**：可选的麦克风数据显示
- **实时状态监控**：音频特征和弹幕计数

## 技术架构

### 组件结构
```
standalone-client/
├── page.tsx              # 主界面
├── layout.tsx            # 布局配置
└── README.md             # 说明文档

components/
├── flip-option.tsx       # 单个选项组件
├── flip-option-list.tsx  # 选项列表容器
├── control-panel.tsx     # 控制面板
└── status-display.tsx    # 状态显示
```

### 核心特性
- **字素簇拆分**：支持中文、emoji 等复杂字符
- **键盘导航**：完整的无障碍访问支持
- **动画降级**：支持 `prefers-reduced-motion` 偏好
- **移动端优化**：44px 最小触控区域

## 使用方法

### 1. 访问客户端
```
http://localhost:3000/standalone-client
```

### 2. 选择预设
- 使用鼠标点击或键盘导航选择可视化预设
- 支持方向键、Home/End 键导航
- Enter/Space 键确认选择

### 3. 开始处理
- 点击"开始"按钮启动音频处理
- 调整反应强度滑块控制敏感度
- 查看实时状态和音频特征

### 4. 键盘快捷键
- `↑↓←→`：导航选项
- `Home/End`：跳转到首尾
- `Enter/Space`：确认选择
- `Tab`：切换焦点

## 部署说明

### Vercel 部署
```bash
# 构建项目
pnpm build

# 部署到 Vercel
vercel --prod
```

### 静态文件部署
```bash
# 导出静态文件
pnpm export

# 部署到任何静态托管服务
```

## 开发说明

### 环境要求
- Node.js 18+
- pnpm 8+
- 现代浏览器支持

### 本地开发
```bash
# 安装依赖
pnpm install

# 启动开发服务器
pnpm dev

# 访问独立客户端
open http://localhost:3000/standalone-client
```

### 自定义配置
- 修改 `PRESET_OPTIONS` 添加新预设
- 调整 `sensitivity` 范围改变敏感度控制
- 自定义颜色主题和动画效果

## 性能优化

### 已实现的优化
- **组件懒加载**：按需加载组件
- **事件防抖**：避免频繁状态更新
- **内存管理**：及时清理定时器和事件监听
- **动画优化**：支持动画降级和性能模式

### 建议的优化
- **虚拟滚动**：大量选项时的性能优化
- **Web Workers**：音频处理的后台线程
- **缓存策略**：预设配置和用户偏好缓存

## 故障排除

### 常见问题
1. **音频权限**：确保浏览器允许麦克风访问
2. **动画卡顿**：检查 `prefers-reduced-motion` 设置
3. **移动端问题**：确保触控区域足够大

### 调试模式
```javascript
// 在浏览器控制台中启用调试
localStorage.setItem('debug', 'true');
```

## 更新日志

### v1.0.0 (2024-01-XX)
- ✨ 初始版本发布
- 🎨 基于 FlipLink 的预设选择器
- 🎵 完整的音频处理功能
- 📱 响应式设计和移动端支持
- ♿ 无障碍访问和键盘导航

## 贡献指南

欢迎提交 Issue 和 Pull Request 来改进这个独立客户端！

## 许可证

MIT License - 详见项目根目录的 LICENSE 文件。
